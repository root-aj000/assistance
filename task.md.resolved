# Vibe Coding AI Agent - Task Breakdown

## Phase 1: Project Foundation
- [x] Create project structure (`/backend`, `/frontend`)
- [x] Initialize backend (FastAPI + Python dependencies)
- [x] Initialize frontend (Next.js 14 + TypeScript)
- [x] Setup `.env` configuration template
- [ ] Create README with setup instructions

## Phase 2: Backend Core Infrastructure
- [ ] Setup FastAPI application structure
- [ ] Configure Uvicorn server
- [ ] Implement environment configuration module
- [ ] Setup CORS and middleware
- [ ] Create base API router structure

## Phase 3: Database Integration (Local)
- [/] Setup FAISS/Chroma for vector embeddings (local)
- [/] Setup Neo4j/Memgraph for graph database (local)
- [/] Create database connection managers
- [/] Implement database initialization scripts
- [/] Create database health check endpoints

## Phase 4: Code Analysis Engine
- [ ] Integrate Tree-sitter for Python parsing
- [ ] Integrate Tree-sitter for TypeScript parsing
- [ ] Build ASG (Abstract Semantic Graph) builder
  - [ ] Extract functions
  - [ ] Extract classes
  - [ ] Extract imports
  - [ ] Extract function calls
  - [ ] Extract references
- [ ] Build CFG (Control Flow Graph) builder
- [ ] Implement code chunking (300-500 tokens)

## Phase 5: Embedding & Indexing
- [ ] Integrate Gemini embedding API
- [ ] Implement embedding generation for code chunks
- [ ] Store embeddings in local vector DB
- [ ] Store ASG/CFG in local graph DB
- [ ] Create indexing pipeline
- [ ] Implement index statistics tracking

## Phase 6: Retrieval System
- [ ] Implement vector similarity search
- [ ] Implement ASG neighbor expansion
- [ ] Implement CFG path expansion
- [ ] Build hybrid ranking system (semantic + graph)
- [ ] Implement deduplication logic
- [ ] Create context pack builder (70k token limit)

## Phase 7: LLM Integration
- [ ] Setup Gemini 2.5 Flash client
- [ ] Implement streaming response handler
- [ ] Add token counting and enforcement
- [ ] Build retry logic with exponential backoff
- [ ] Create structured output parsers
- [ ] Implement rate limiting

## Phase 8: Backend API Endpoints
- [ ] `/ai/chat` - Chat with entire codebase
- [ ] `/ai/debug` - Debug specific files/errors
- [ ] `/ai/plan` - Create task plans
- [ ] `/ai/codebase/chat` - Chat with individual files
- [ ] `/files` - List repository files
- [ ] `/file` - Get file content
- [ ] `/index/stats` - Index coverage metrics

## Phase 9: Frontend Development
- [ ] Setup Next.js 14 project structure
- [ ] Create FileTree component
- [ ] Create CodeViewer component (syntax highlighting)
- [ ] Create ChatBox component
- [ ] Create MessageBubble component
- [ ] Implement API client
- [ ] Connect frontend to backend
- [ ] Add loading states and error handling

## Phase 10: Testing & Verification
- [ ] Test file indexing on sample repository
- [ ] Verify vector search functionality
- [ ] Verify graph traversal
- [ ] Test chat endpoint
- [ ] Test debug endpoint
- [ ] Test plan generation
- [ ] Validate token limits
- [ ] Check index coverage metrics
- [ ] End-to-end integration testing

## Phase 11: Documentation & Polish
- [ ] Complete README with setup instructions
- [ ] Document API endpoints
- [ ] Document configuration options
- [ ] Add inline code documentation
- [ ] Create usage examples
- [ ] Performance optimization
